#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <unistd.h> // sleep function
#include "matrice.h"
#include "game_control.h"

#define TRUE 1
#define FALSE 0

void welcome();
/*
 * Function: welcome
 * -----------------
 * Just a welcome block
 * Sign generated by : https://fsymbols.com/generators/wide/
 */
void main_menu();
/*
 * Function: main_menu
 * -----------------
 * Menu principal, l'utilisateur à trois choix possible
 */
void grid_menu();

int main() {
    // initialisation de la seed sur le temps
    srand(time(NULL));

    // Welcome message
    welcome();

    printf("\n");

    // Select menu
    main_menu();

    printf("\n\n-+-+-+-+-+-+-+-+-+\nSortie du programme.\n-+-+-+-+-+-+-+-+-+\n");

    return 0;
}

void welcome()
{
    printf("░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n"
           "████████╗ ░█████╗░ ██╗░░██╗ ██╗░░░██╗ ███████╗ ██╗░░░██╗\n"
           "╚══██╔══╝ ██╔══██╗ ██║░██╔╝ ██║░░░██║ ╚════██║ ██║░░░██║\n"
           "░░░██║░░░ ███████║ █████═╝░ ██║░░░██║ ░░███╔═╝ ██║░░░██║\n"
           "░░░██║░░░ ██╔══██║ ██╔═██╗░ ██║░░░██║ ██╔══╝░░ ██║░░░██║\n"
           "░░░██║░░░ ██║░░██║ ██║░╚██╗ ╚██████╔╝ ███████╗ ╚██████╔╝\n"
           "░░░╚═╝░░░ ╚═╝░░╚═╝ ╚═╝░░╚═╝ ░╚═════╝░ ╚══════╝ ░╚═════╝░\n"
           "░░░░░░░░░░░░░░░░░░░░░░░░░Marque déposée le 31/01/2006░░░\n");
}
void main_menu()
{
    int choice = -1;
    do {
        printf("Menu principal. Choisissez votre menu : \n"
               "1 - Résoudre une grille.\n"
               "2 - Résoudre automatiquement une grille de Takuzu.\n"
               "3 - Génère une grille de Takuzu.\n"
               "4 - Quitter le programme.\n"
               "Choix : ");
        scanf("%d", &choice);
        switch (choice) {
            case 1:
            {
                grid_menu();
                break;
            }
            case 2:
            {
                // 2
                break;
            }
            case 3:
            {
                // 3
                break;
            }
            case 4:
            {
                break;
            }
            default: printf("Choix non valide. SVP essayez a nouveau.\n");
        }
    } while (choice != 4);
}

void grid_menu()
{
    int choice = -1;
    do {
        printf("Quelle taille de grille souhaitez-vous ?\nTailles disponible : 4, 8\nChoix : ");
        scanf("%d", &choice);

        if (choice == 4 || choice == 8)
        {
            int** grille_solution = creation_mat_modele(choice);
            int** grille_jeu = creation_mat_modele(choice);
            game(grille_jeu, choice);
            sleep(3); // Cooldown : 3 sec le temps qu'il regarde sa grille
            printf("Retour au menu principal");
            libere_matrice(choice, grille_jeu);
            libere_matrice(choice, grille_solution);
        }
        else
        {
            printf("Taille indisponible ou non reconnue. Veuillez réessayer.\n");
        }
    } while (!(choice == 4 || choice == 8));
    //printf("\n-+-+-+-+-+-+-+-+-+\nSortie du grid_menu().\n-+-+-+-+-+-+-+-+-+\n");
}